var N6Q0X={'N7D':(function(t7D){return (function(Z7D,m7D){return (function(y7D){return {U7D:y7D};})(function(o7D){var i7D,l7D=0;for(var a7D=Z7D;l7D<o7D["length"];l7D++){var T7D=m7D(o7D,l7D);i7D=l7D===0?T7D:i7D^T7D;}return i7D?a7D:!a7D;});})((function(b7D,S7D,E7D,Y7D){var F7D=26;return b7D(t7D,F7D)-Y7D(S7D,E7D)>F7D;})(parseInt,Date,(function(S7D){return (''+S7D)["substring"](1,(S7D+'')["length"]-1);})('_getTime2'),function(S7D,E7D){return new S7D()[E7D]();}),function(o7D,l7D){var s7D=parseInt(o7D["charAt"](l7D),16)["toString"](2);return s7D["charAt"](s7D["length"]-1);});})('18fj9j22n2'),'k0X':function(L,p){return L>p;},'c0X':function(L,p){return L===p;},'Q6X':function(L,p){return L<p;},'T6X':function(L,p){return L===p;},'A6X':function(L,p){return L===p;},'p4X':function(L,p){return L===p;},'e6X':function(L,p){return L===p;},'y0X':function(L,p){return L===p;},'S6X':function(L,p){return L===p;},'b6X':function(L,p){return L===p;},'B0X':function(L,p){return L===p;},'P6X':function(L,p){return L<p;},'m0X':function(L,p){return L===p;},'X6X':function(L,p){return L===p;},'f6X':function(L,p){return L===p;},'g0X':function(L,p){return L===p;},'o6X':function(L,p){return L<p;},'r6X':function(L,p){return L===p;},'Z6X':function(L,p){return L===p;},'O6X':function(L,p){return L-p;},'R0X':function(L,p){return L===p;},'z6X':function(L,p){return L===p;},'C0X':function(L,p){return L===p;},'N6X':function(L,p){return L===p;},'d6X':function(L,p){return L===p;},'W0X':function(L,p){return L===p;},'v6X':function(L,p){return L>p;}};define(['scripts/Helper','scripts/Request','scripts/Sanitizer','pagination/scripts/config/DownloadPdfConfig','pagination/scripts/RuleEngine','pagination/scripts/config/PDFRuleConfig','pagination/scripts/util/DomHelpers','phoenix/scripts/Logger'],function pdfDownloadLoader(Z,Y,f,j,k,x,A,e){var J=N6Q0X.N7D.U7D("a756")?"isFootnoteTypeLinkExist":null,a=N6Q0X.N7D.U7D("878")?true:"editContainer",z=N6Q0X.N7D.U7D("882")?"applyCondition":false,h=N6Q0X.N7D.U7D("84")?'act#227':0,W=N6Q0X.N7D.U7D("85df")?"status":"downloadTimeout";function m(L){var p=N6Q0X.N7D.U7D("ff")?"getFirstMatch":JSON.parse(L);e.debug(p.message);e.debug('failure');r.apply(this,[]);w2.apply(this,[]);}function c(){e.debug('Request timeout');r.apply(this,[]);w2.apply(this,[]);q(this);}function N2(O,K){var M,P,w=N6Q0X.N7D.U7D("8ec")?"isFittableWidth":null,D=N6Q0X.N7D.U7D("7641")?"getLinkSourceAndDestination":null;O.counter+=N6Q0X.N7D.U7D("25")?1:'.source-container .optreject .cpeins';P=N6Q0X.N7D.U7D("8348")?{'method':'GET'}:'act#206';D=N6Q0X.N7D.U7D("d437")?new Y(K,w,true,P):"propkey";D.setSuccessCallback(function N(L){var p=10,v=N6Q0X.N7D.U7D("febf")?"counter":"count",V=N6Q0X.N7D.U7D("d28")?"k0X":'switchToLastChildNode',G='error',Q="R0X",I='completed',n=N6Q0X.N7D.U7D("154a")?'act#104':"y0X";M=N6Q0X.N7D.U7D("d58")?"dimensionObj":JSON.parse(L);if(N6Q0X[n](M[W],I)){q(O);K2.apply(O,[]);}else if(N6Q0X[Q](M[W],G)){q(O);M2();}if(N6Q0X[V](O[v],p)){q(O);R();}e.debug('PDF CallBack Counter: ',O.counter);});D.setFailureCallback(p2.bind(O));D.setTimeoutCallback(c.bind(O));D.send();}function X(L,p){var v=new FormData(),V=null,G=L.saveUrl,Q=N6Q0X.N7D.U7D("fe")?{'method':'POST'}:'.typeCommonRef .sb_reference .sb_contribution .sb_title .x',I=Q2(L),n={'content':p,'token':L.articleToken,'stylesheet':I,'class':L.downloadPdfConfig.containerClass,'proofState':L.proofState};v.append('json',JSON.stringify(n));V=new Y(G,v,true,Q);V.setSuccessCallback(v2.bind(L));V.setFailureCallback(m.bind(L));V.setTimeoutCallback(V2.bind(L));V.send();}function q(L){r.apply(L,[]);w2.apply(L,[]);clearInterval(l2);}function L2(L){return L.downloadPdfConfig.enablePdfRuler;}function I2(v,V){var G=function(L){var p="innerHTML";Q[p]=L;},Q=null,I=N6Q0X.N7D.U7D("45")?v.domHelper:"elementInfo";Q=I.create('div');I.addIntoClassList(Q,'pdf-rule-container');G(V);I.append(Q,v.target);d(v,I.clone(Q,true));I.remove(Q,v.target);}function R(){alert('Sorry! PDF generation timed out. Please try again');}function p2(L){var p=JSON.parse(L);e.debug(p.message);r.apply(this,[]);w2.apply(this,[]);e.debug('failure');q(this);}function r(){var L=null,p=null;L=this.htmlDoc.querySelector('.downloadBtn');p=this.htmlDoc.querySelector('.pdfProgressBtn');L.classList.remove('hide');L.classList.add('show');p.classList.remove('show');p.classList.add('hide');}function n2(L,p){var v;p.classList.add('hide');p.classList.remove('show');v=L.htmlDoc.querySelector('.pdfProgressBtn');v.classList.remove('hide');v.classList.add('show');}function S2(p,v){var V=N6Q0X.N7D.U7D("683a")?"journals":"proofOverlay",G=N6Q0X.N7D.U7D("f2d")?'.runningitem * + .ce_section.first_level':"S6X",Q=N6Q0X.N7D.U7D("b8a")?"o6X":')',I=N6Q0X.N7D.U7D("af2e")?"N6X":'.destination-container .journal-logo',n="P6X",O=N6Q0X.N7D.U7D("88da")?function(L){P=L.length;}:'replaceChilds',K=function(L){P=L.length;},M=0,P=0,w,D=N6Q0X.N7D.U7D("a147")?"pl":[],N=N6Q0X.N7D.U7D("628e")?'.source-container .ce_section > .cpeins > .ce_label':{};O(j);for(M=0;N6Q0X[n](M,P);M+=1){w=j[M].layoutName.toLowerCase();if(N6Q0X[I](v,w)){D.push(j[M]);}}K(D);for(M=0;N6Q0X[Q](M,P);M+=1){if(N6Q0X[G](D[M][V].length,h)){var U=function(L){N=L[M];};U(D);}if(D[M].journals.indexOf(p.jid)>-1){return D[M];}}return N;}function V2(){e.debug('Request timeout');}function Q2(p){var v="Q6X",V="v6X",G=N6Q0X.N7D.U7D("c16")?function(){var L=N6Q0X.N7D.U7D("2153")?"paths":"unsubscribePaginationEvents";M[L]=[];}:'span.ce_float-anchor[refid]',Q=function(L){n=L.length;},I=null,n=N6Q0X.N7D.U7D("426")?'ProgressLevel':0,O=0,K=null,M=N6Q0X.N7D.U7D("71")?'.content a':{},P=N6Q0X.N7D.U7D("f4")?{}:'.source-container .table table td[rowspan]';G();I=p.domHelper.findAll('link[data-is-pagination-link]',p.htmlDoc);Q(I);if(N6Q0X[V](n,h)){for(;N6Q0X[v](O,n);O+=1){var w=function(L){K=L[O];};P={};w(I);P.path=K.getAttribute('href');M.paths.push(P);}}return M;}function v2(p){var v="g0X",V=N6Q0X.N7D.U7D("b46")?"isObject":"overlay",G=N6Q0X.N7D.U7D("6cc")?'.source-container .single-affiliation .last-author':"c0X",Q='download',I="C0X",n="isUndefined",O=N6Q0X.N7D.U7D("a5")?"W0X":'act#121',K="pingUrl",M=function(L){w=N6Q0X.N7D.U7D("81")?L[K]:"errorMessage";},P,w,D;P=JSON.parse(p);P=JSON.parse(P.data);if(N6Q0X[O](Z[n](P[W]),z)&&N6Q0X[I](P[W],Q)){K2.apply(this,[]);return ;}if(N6Q0X[G](Z[V](P),z)||N6Q0X[v](Z[n](P[K]),a)){w2.apply(this,[]);r.apply(this,[]);return ;}M(P);D=this.callBackRate;this.counter=1;l2=N6Q0X.N7D.U7D("6e8")?'<span class="ce_caption-before">(</span>':setInterval(N2,D,this,w);}function O2(L){var p=N6Q0X.N7D.U7D("f1")?'end':"B0X",v=N6Q0X.N7D.U7D("8a")?"placable":null,V=N6Q0X.N7D.U7D("68b5")?"balance":null;V=N6Q0X.N7D.U7D("c7a")?L.domHelper.find('body',L.htmlDoc):'pgnBegAct#1';v=L.domHelper.find('iframe.hideme',V);if(N6Q0X[p](v,J)){v=L.domHelper.create('iframe');v.classList.add('hideme');}L.domHelper.append(v,V);}function d(V,G){var Q=N6Q0X.N7D.U7D("68")?"addHeader":null,I=null;I=performance.now();Q=N6Q0X.N7D.U7D("8afd")?'.ce_glossary':new k(V.win,V.doc,'pdfRule',V.eventBus,[]);Q.start(G,{},function n(){var L=N6Q0X.N7D.U7D("7f71")?"saveUrl":"now",p="O6X";e.debug('PDF Rules Applyed At '+(N6Q0X[p](performance[L](),I))+' milliseconds.');setTimeout(function v(){X(V,G.innerHTML);},0);});}function M2(){alert('Sorry! Error on PDF Generation.');}function K2(){var v=N6Q0X.N7D.U7D("5c")?'_blank':'.typeTwoRef .sb_contribution .sb_title',V=function(L){var p="target";G[p]=L;},G=this.domHelper.find('iframe.hideme',this.htmlDoc);G.src=this.downloadUrl+'/'+this.articleToken;V(v);e.debug('success');r.apply(this,[]);w2.apply(this,[]);}function P2(v,V,G){var Q="b6X",I=N6Q0X.N7D.U7D("5f7e")?function(L){var p="downloadPdfConfig";v[p]=N6Q0X.N7D.U7D("44c1")?L:"fromItem";}:'options needed to break the figure',n=N6Q0X.N7D.U7D("641a")?V:"hasClassName",O=N6Q0X.N7D.U7D("1f")?"layoutIdentifier":false,K={};O2(v);K=S2(v,G);I(K);O=N6Q0X.N7D.U7D("f648")?L2(v):5;if(N6Q0X[Q](O,a)){I2(v,n);}else{X(v,n);}}function w2(){var V='none',G="m0X",Q=function(L){var p="display";var v="style";I[v][p]=L;},I=N6Q0X.N7D.U7D("62fd")?'right':this.htmlDoc.querySelector('div.overlay');if(N6Q0X[G](I,J)){return ;}Q(V);}var B=null,H=null,l2;B=function U2(){this.domHelper=new A();};H=B.prototype;H.download=function b2(L,p,v,V,G,Q,I,n,O,K,M,P,w){var D="p4X",N="z6X",U="r6X",s="X6X",o="d6X",E="e6X",l="HTMLElement",F="A6X",S="isEmptyString",t="f6X",i="HTMLDocument",y="Z6X",b="Window",T="T6X";if(N6Q0X[T](L instanceof L[b],z)){throw  new Error('PDF Downloader requires window object');}if(N6Q0X[y](p instanceof L[i],z)){throw  new Error('PDF Downloader requires html document object');}if(N6Q0X[t](Z[S](v),a)){throw  new Error('Need to some data to download pdf');}if(N6Q0X[F](V instanceof L[l],z)){throw  new Error('PDF Downloader requires html element object');}if(N6Q0X[E](Z[S](G),a)){throw  new Error('Save url cannot be empty');}if(N6Q0X[o](Z[S](Q),a)){throw  new Error('Download url cannot be empty');}if(N6Q0X[s](Z[S](I),a)){throw  new Error('Token cannot be empty');}if(N6Q0X[U](Z[S](O),a)){throw  new Error('Jid value cannot be empty');}if(N6Q0X[N](Z[S](w),a)){w='SINGLE';}this.win=L;this.htmlDoc=p;this.target=V;this.saveUrl=G;this.downloadUrl=Q;this.articleToken=I;this.eventBus=n;this.jid=O;this.callBackRate=M;this.proofState=N6Q0X[D](P,a)?'readOnly':'active';w=w.toLowerCase();n2(this,K);w2.apply(this,[]);P2(this,v,w);};return B;});