<!doctype html>
<html>
    <head>
        <title>Page Central - Editor</title>
        <meta http-equiv="cache-control" content="no-cache" />
        <script src='http://10.0.5.39:8080/WIRISeditor-3.9.1.2439/editor?lang=en'></script>

        <link rel="stylesheet" type="text/css" href="styles/dialog.css" />
        <link rel="stylesheet" type="text/css" href="styles/math-editor.css" />
        <style type="text/css">
          .mathml, .equation_data_container{
            display: none;
          }
          .matheditor-parent-container .hide {
            display: none;
          }
          .editor .eqnChanged, #component-container .eqnChanged {
              background: white;
              border: 1px solid #888;
              padding: 2px;
              box-shadow: 5px 5px 5px #888;
              -moz-box-shadow: 5px 5px 5px #888;
              -webkit-box-shadow: 5px 5px 5px #888;
              filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=4,OffY=4,Color='#33000000');
          }
        </style>

    </head>
    <body>
        <div class='editor'>
             <p>Equation 1 - No version</p><br/>

             <div editable="true" name="OPT_ID_1454" namespace="mml" class="eqn-container" title="Click to edit" id="OPT_ID_1454"><img id="OPT_ID_1454" datasrc="proofs/elsevier/EJMSOL/13/images/si12.gif" src="https://s3.amazonaws.com/pc_dev_test/proofs/elsevier/EJMSOL/13/images/si12.gif"><span class="equation_data_container"><span class="current_version">0</span><span version="0"><span class="mathml"><math altimg="si12.gif" name="OPT_ID_1454"><mrow name="OPT_ID_1455"><msub name="OPT_ID_1456"><mi name="OPT_ID_1457">Φ</mi><mi name="OPT_ID_1458">i</mi></msub><mrow name="OPT_ID_1459"><mfenced open="(" close=")"><mrow><mi name="OPT_ID_1461">t</mi></mrow></mfenced></mrow><mo name="OPT_ID_1463">≈</mo><msub name="OPT_ID_1464"><mi name="OPT_ID_1465">ω</mi><mi name="OPT_ID_1466">i</mi></msub><mrow name="OPT_ID_1467"><mfenced open="(" close=")"><mrow><mrow name="OPT_ID_1469"><msub name="OPT_ID_1470"><mi name="OPT_ID_1471">A</mi><mi name="OPT_ID_1472">i</mi></msub></mrow></mrow></mfenced></mrow><mi name="OPT_ID_1474">t</mi><mo name="OPT_ID_1475">+</mo><msub name="OPT_ID_1476"><mi name="OPT_ID_1477">Θ</mi><mi name="OPT_ID_1478">i</mi></msub><mrow name="OPT_ID_1479"><mfenced open="(" close=")"><mrow><mi name="OPT_ID_1481">t</mi></mrow></mfenced></mrow><mtext name="OPT_ID_1483">.</mtext></mrow></math></span><span class="image">https://s3.amazonaws.com/pc_dev_test/proofs/elsevier/EJMSOL/13/images/si12.gif</span></span><span version="1"><span class="mathml"></span><span class="image">https://s3.amazonaws.com/pc_dev_test/proofs/elsevier/EJMSOL/13/images/si12.gif</span></span></span></div>
             <p>Equation 1.2 - line break equation</p><br/>
<div editable="true" name="OPT_ID_2948" namespace="mml" class="eqn-container" title="Click to edit" id="OPT_ID_2948"><img id="OPT_ID_2948" datasrc="proofs/elsevier/EJMSOL/13/images/si21.gif" src="https://s3.amazonaws.com/pc_dev_test/proofs/elsevier/EJMSOL/13/images/si21.gif"><span class="equation_data_container"><span class="current_version">0</span><span version="0"><span class="mathml"><math altimg="si21.gif" name="OPT_ID_2948"><mtable columnalign="left" name="OPT_ID_2949"><mtr name="OPT_ID_2950"><mtd name="OPT_ID_2951"><mo name="OPT_ID_2952">ⅆ</mo><msub name="OPT_ID_2953"><mi name="OPT_ID_2954">A</mi><mn name="OPT_ID_2955">1</mn></msub><mo name="OPT_ID_2956">=</mo><msub name="OPT_ID_2957"><mover accent="true" name="OPT_ID_2958"><mi name="OPT_ID_2959">F</mi><mo name="OPT_ID_2960">¯</mo></mover><mn name="OPT_ID_2961">1</mn></msub><mrow name="OPT_ID_2962"><mfenced open="(" close=")"><mrow><mrow name="OPT_ID_2964"><mi mathvariant="bold-italic" name="OPT_ID_2965">A</mi><mo name="OPT_ID_2966">,</mo><mi mathvariant="bold-italic" name="OPT_ID_2967">Γ</mi></mrow></mrow></mfenced></mrow><mo name="OPT_ID_2969">ⅆ</mo><mi name="OPT_ID_2970">t</mi><mo name="OPT_ID_2971">+</mo><msub name="OPT_ID_2972"><mover accent="true" name="OPT_ID_2973"><mi name="OPT_ID_2974">f</mi><mo name="OPT_ID_2975">¯</mo></mover><mrow name="OPT_ID_2976"><mn name="OPT_ID_2977">11</mn></mrow></msub><mo name="OPT_ID_2978">ⅆ</mo><msub name="OPT_ID_2979"><mi name="OPT_ID_2980">B</mi><mn name="OPT_ID_2981">1</mn></msub><mrow name="OPT_ID_2982"><mfenced open="(" close=")"><mrow><mi name="OPT_ID_2984">t</mi></mrow></mfenced></mrow><mo name="OPT_ID_2986">+</mo><msub name="OPT_ID_2987"><mover accent="true" name="OPT_ID_2988"><mi name="OPT_ID_2989">f</mi><mo name="OPT_ID_2990">¯</mo></mover><mrow name="OPT_ID_2991"><mn name="OPT_ID_2992">12</mn></mrow></msub><mo name="OPT_ID_2993">ⅆ</mo><msub name="OPT_ID_2994"><mi name="OPT_ID_2995">B</mi><mn name="OPT_ID_2996">2</mn></msub><mrow name="OPT_ID_2997"><mfenced open="(" close=")"><mrow><mi name="OPT_ID_2999">t</mi></mrow></mfenced></mrow><mo name="OPT_ID_3001">,</mo></mtd></mtr><mtr name="OPT_ID_3002"><mtd name="OPT_ID_3003"><mo name="OPT_ID_3004">ⅆ</mo><msub name="OPT_ID_3005"><mi name="OPT_ID_3006">A</mi><mn name="OPT_ID_3007">2</mn></msub><mo name="OPT_ID_3008">=</mo><msub name="OPT_ID_3009"><mover accent="true" name="OPT_ID_3010"><mi name="OPT_ID_3011">F</mi><mo name="OPT_ID_3012">¯</mo></mover><mn name="OPT_ID_3013">2</mn></msub><mrow name="OPT_ID_3014"><mfenced open="(" close=")"><mrow><mrow name="OPT_ID_3016"><mi mathvariant="bold-italic" name="OPT_ID_3017">A</mi><mo name="OPT_ID_3018">,</mo><mi mathvariant="bold-italic" name="OPT_ID_3019">Γ</mi></mrow></mrow></mfenced></mrow><mo name="OPT_ID_3021">ⅆ</mo><mi name="OPT_ID_3022">t</mi><mo name="OPT_ID_3023">+</mo><msub name="OPT_ID_3024"><mover accent="true" name="OPT_ID_3025"><mi name="OPT_ID_3026">f</mi><mo name="OPT_ID_3027">¯</mo></mover><mrow name="OPT_ID_3028"><mn name="OPT_ID_3029">21</mn></mrow></msub><mo name="OPT_ID_3030">ⅆ</mo><msub name="OPT_ID_3031"><mi name="OPT_ID_3032">B</mi><mn name="OPT_ID_3033">1</mn></msub><mrow name="OPT_ID_3034"><mfenced open="(" close=")"><mrow><mi name="OPT_ID_3036">t</mi></mrow></mfenced></mrow><mo name="OPT_ID_3038">+</mo><msub name="OPT_ID_3039"><mover accent="true" name="OPT_ID_3040"><mi name="OPT_ID_3041">f</mi><mo name="OPT_ID_3042">¯</mo></mover><mrow name="OPT_ID_3043"><mn name="OPT_ID_3044">22</mn></mrow></msub><mo name="OPT_ID_3045">ⅆ</mo><msub name="OPT_ID_3046"><mi name="OPT_ID_3047">B</mi><mn name="OPT_ID_3048">2</mn></msub><mrow name="OPT_ID_3049"><mfenced open="(" close=")"><mrow><mi name="OPT_ID_3051">t</mi></mrow></mfenced></mrow><mo name="OPT_ID_3053">,</mo></mtd></mtr><mtr name="OPT_ID_3054"><mtd name="OPT_ID_3055"><mo name="OPT_ID_3056">ⅆ</mo><msub name="OPT_ID_3057"><mi name="OPT_ID_3058">Γ</mi><mn name="OPT_ID_3059">1</mn></msub><mo name="OPT_ID_3060">=</mo><msub name="OPT_ID_3061"><mover accent="true" name="OPT_ID_3062"><mi name="OPT_ID_3063">G</mi><mo name="OPT_ID_3064">¯</mo></mover><mn name="OPT_ID_3065">1</mn></msub><mrow name="OPT_ID_3066"><mfenced open="(" close=")"><mrow><mrow name="OPT_ID_3068"><mi mathvariant="bold-italic" name="OPT_ID_3069">A</mi><mo name="OPT_ID_3070">,</mo><mi mathvariant="bold-italic" name="OPT_ID_3071">Γ</mi></mrow></mrow></mfenced></mrow><mo name="OPT_ID_3073">ⅆ</mo><mi name="OPT_ID_3074">t</mi><mo name="OPT_ID_3075">+</mo><msub name="OPT_ID_3076"><mover accent="true" name="OPT_ID_3077"><mi name="OPT_ID_3078">g</mi><mo name="OPT_ID_3079">¯</mo></mover><mrow name="OPT_ID_3080"><mn name="OPT_ID_3081">11</mn></mrow></msub><mo name="OPT_ID_3082">ⅆ</mo><msub name="OPT_ID_3083"><mi name="OPT_ID_3084">B</mi><mn name="OPT_ID_3085">1</mn></msub><mrow name="OPT_ID_3086"><mfenced open="(" close=")"><mrow><mi name="OPT_ID_3088">t</mi></mrow></mfenced></mrow><mo name="OPT_ID_3090">+</mo><msub name="OPT_ID_3091"><mover accent="true" name="OPT_ID_3092"><mi name="OPT_ID_3093">g</mi><mo name="OPT_ID_3094">¯</mo></mover><mrow name="OPT_ID_3095"><mn name="OPT_ID_3096">12</mn></mrow></msub><mo name="OPT_ID_3097">ⅆ</mo><msub name="OPT_ID_3098"><mi name="OPT_ID_3099">B</mi><mn name="OPT_ID_3100">2</mn></msub><mrow name="OPT_ID_3101"><mfenced open="(" close=")"><mrow><mi name="OPT_ID_3103">t</mi></mrow></mfenced></mrow><mo name="OPT_ID_3105">,</mo></mtd></mtr><mtr name="OPT_ID_3106"><mtd name="OPT_ID_3107"><mo name="OPT_ID_3108">ⅆ</mo><msub name="OPT_ID_3109"><mi name="OPT_ID_3110">Γ</mi><mn name="OPT_ID_3111">2</mn></msub><mo name="OPT_ID_3112">=</mo><msub name="OPT_ID_3113"><mover accent="true" name="OPT_ID_3114"><mi name="OPT_ID_3115">G</mi><mo name="OPT_ID_3116">¯</mo></mover><mn name="OPT_ID_3117">2</mn></msub><mrow name="OPT_ID_3118"><mfenced open="(" close=")"><mrow><mrow name="OPT_ID_3120"><mi mathvariant="bold-italic" name="OPT_ID_3121">A</mi><mo name="OPT_ID_3122">,</mo><mi mathvariant="bold-italic" name="OPT_ID_3123">Γ</mi></mrow></mrow></mfenced></mrow><mo name="OPT_ID_3125">ⅆ</mo><mi name="OPT_ID_3126">t</mi><mo name="OPT_ID_3127">+</mo><msub name="OPT_ID_3128"><mover accent="true" name="OPT_ID_3129"><mi name="OPT_ID_3130">g</mi><mo name="OPT_ID_3131">¯</mo></mover><mrow name="OPT_ID_3132"><mn name="OPT_ID_3133">21</mn></mrow></msub><mo name="OPT_ID_3134">ⅆ</mo><msub name="OPT_ID_3135"><mi name="OPT_ID_3136">B</mi><mn name="OPT_ID_3137">1</mn></msub><mrow name="OPT_ID_3138"><mfenced open="(" close=")"><mrow><mi name="OPT_ID_3140">t</mi></mrow></mfenced></mrow><mo name="OPT_ID_3142">+</mo><msub name="OPT_ID_3143"><mover accent="true" name="OPT_ID_3144"><mi name="OPT_ID_3145">g</mi><mo name="OPT_ID_3146">¯</mo></mover><mrow name="OPT_ID_3147"><mn name="OPT_ID_3148">22</mn></mrow></msub><mo name="OPT_ID_3149">ⅆ</mo><msub name="OPT_ID_3150"><mi name="OPT_ID_3151">B</mi><mn name="OPT_ID_3152">2</mn></msub><mrow name="OPT_ID_3153"><mfenced open="(" close=")"><mrow><mi name="OPT_ID_3155">t</mi></mrow></mfenced></mrow><mtext name="OPT_ID_3157">.</mtext></mtd></mtr></mtable></math></span><span class="image">https://s3.amazonaws.com/pc_dev_test/proofs/elsevier/EJMSOL/13/images/si21.gif</span></span><span version="1"><span class="mathml"></span><span class="image">https://s3.amazonaws.com/pc_dev_test/proofs/elsevier/EJMSOL/13/images/si21.gif</span></span></span></div>
             <p>Equation 2 - Error Version</p><br/>
             <div editable="true" name="OPT_ID_313" namespace="mml" class="eqn-container" title="Click on the equation to provide comment" id="OPT_ID_313">
             <img id="OPT_ID_313_blah" src="" class="eqnChanged">

             <span class="equation_data_container"><span class="current_version">2</span><span version="0"><span class="mathml"><math altimg="si1.gif" name="OPT_ID_313"><mrow name="OPT_ID_314"><mfrac name="OPT_ID_315"><mrow name="OPT_ID_316"><mo name="OPT_ID_317">∂</mo><mi name="OPT_ID_318">ρ</mi></mrow><mrow name="OPT_ID_319"><mo name="OPT_ID_320">∂</mo><mi name="OPT_ID_321">t</mi></mrow></mfrac><mo name="OPT_ID_322">+</mo><mfrac name="OPT_ID_323"><mo name="OPT_ID_324">∂</mo><mrow name="OPT_ID_325"><mo name="OPT_ID_326">∂</mo><msub name="OPT_ID_327"><mi name="OPT_ID_328">x</mi><mi name="OPT_ID_329">i</mi></msub></mrow></mfrac><mrow name="OPT_ID_330"><mfenced open="(" close=")"><mrow><mrow name="OPT_ID_332"><mi name="OPT_ID_333">ρ</mi><msub name="OPT_ID_334"><mi name="OPT_ID_335">u</mi><mi name="OPT_ID_336">i</mi></msub></mrow></mrow></mfenced></mrow><mo name="OPT_ID_338">=</mo><mn name="OPT_ID_339">0.</mn></mrow></math></span><span class="image">https://s3.amazonaws.com/test_tmp/proofs/elsevier/JOEI/72/images/si1.gif</span></span><span version="1"><span class="mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><mfrac><mrow><mo>∂</mo><mi>ρ</mi></mrow><mrow><mo>∂</mo><mi>t</mi></mrow></mfrac><mo>+</mo><mfrac><mo>∂</mo><mrow><mo>∂</mo><msub><mi>x</mi><mi>i</mi></msub></mrow></mfrac><mfenced><mrow><mi>ρ</mi><msub><mi>u</mi><mi>i</mi></msub></mrow></mfenced><mo>=</mo><mn>0.</mn><mn>1</mn></math></span><span class="image">https://s3.amazonaws.com/test_tmp/proofs/elsevier/JOEI/72/images/si1.gif</span></span><span version="2"><span class="mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><mfrac><mrow><mo>∂</mo><mi>ρ</mi></mrow><mrow><mo>∂</mo><mi>t</mi></mrow></mfrac><mo>+</mo><mfrac><mo>∂</mo><mrow><mo>∂</mo><msub><mi>x</mi><mi>i</mi></msub></mrow></mfrac><mfenced><mrow><mi>ρ</mi><msub><mi>u</mi><mi>i</mi></msub></mrow></mfenced><mo>=</mo><mn>0.</mn><mn>1</mn></math></span><span class="image">https://s3.amazonaws.com/test_tmp/proofs/elsevier/JOEI/72/math/images/5af8295b58f30eaddfaf603dc91effb5.png</span></span></span></div>
             <p>Equation 3 - Multiple Version</p><br/>
             <div editable="true" name="OPT_ID_490" namespace="mml" class="eqn-container" title="Click on the equation to provide comment" id="OPT_ID_490"><img id="OPT_ID_490" src="https://s3.amazonaws.com/test_tmp/proofs/elsevier/JOEI/72/math/images/6154e062e5ab4cd9b53bca4cad8eb8ef.png"><span class="equation_data_container"><span class="current_version">2</span><span version="0"><span class="mathml"><math altimg="si3.gif" name="OPT_ID_490"><mrow name="OPT_ID_491"><mfrac name="OPT_ID_492"><mrow name="OPT_ID_493"><mo name="OPT_ID_494">∂</mo><mrow name="OPT_ID_495"><mfenced open="(" close=")"><mrow><mrow name="OPT_ID_497"><mi name="OPT_ID_498">ρ</mi><mi name="OPT_ID_499">k</mi></mrow></mrow></mfenced></mrow></mrow><mrow name="OPT_ID_501"><mo name="OPT_ID_502">∂</mo><mi name="OPT_ID_503">t</mi></mrow></mfrac><mo name="OPT_ID_504">+</mo><mfrac name="OPT_ID_505"><mrow name="OPT_ID_506"><mo name="OPT_ID_507">∂</mo><mrow name="OPT_ID_508"><mfenced open="(" close=")"><mrow><mrow name="OPT_ID_510"><mi name="OPT_ID_511">ρ</mi><mi name="OPT_ID_512">k</mi><msub name="OPT_ID_513"><mi name="OPT_ID_514">u</mi><mi name="OPT_ID_515">i</mi></msub></mrow></mrow></mfenced></mrow></mrow><mrow name="OPT_ID_517"><mo name="OPT_ID_518">∂</mo><msub name="OPT_ID_519"><mi name="OPT_ID_520">x</mi><mi name="OPT_ID_521">i</mi></msub></mrow></mfrac><mo name="OPT_ID_522">=</mo><mfrac name="OPT_ID_523"><mo name="OPT_ID_524">∂</mo><mrow name="OPT_ID_525"><mo name="OPT_ID_526">∂</mo><msub name="OPT_ID_527"><mi name="OPT_ID_528">x</mi><mi name="OPT_ID_529">j</mi></msub></mrow></mfrac><mrow name="OPT_ID_530"><mfenced open="(" close=")"><mrow><mrow name="OPT_ID_532"><msub name="OPT_ID_533"><mi name="OPT_ID_534">α</mi><mi name="OPT_ID_535">k</mi></msub><msub name="OPT_ID_536"><mi name="OPT_ID_537">μ</mi><mrow name="OPT_ID_538"><mtext name="OPT_ID_539">eff</mtext></mrow></msub><mfrac name="OPT_ID_540"><mrow name="OPT_ID_541"><mo name="OPT_ID_542">∂</mo><mi name="OPT_ID_543">k</mi></mrow><mrow name="OPT_ID_544"><mo name="OPT_ID_545">∂</mo><msub name="OPT_ID_546"><mi name="OPT_ID_547">x</mi><mi name="OPT_ID_548">j</mi></msub></mrow></mfrac></mrow></mrow></mfenced></mrow><mo name="OPT_ID_550">+</mo><msub name="OPT_ID_551"><mi name="OPT_ID_552">G</mi><mi name="OPT_ID_553">k</mi></msub><mo name="OPT_ID_554">+</mo><mi name="OPT_ID_555">ρ</mi><mi name="OPT_ID_556">ε</mi><mo name="OPT_ID_557">.</mo></mrow></math></span><span class="image">https://s3.amazonaws.com/test_tmp/proofs/elsevier/JOEI/72/images/si3.gif</span></span><span version="1"><span class="mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><mfrac><mrow><mo>&#8706;</mo><mfenced><mrow><mi>&#961;</mi><mi>k</mi></mrow></mfenced></mrow><mrow><mo>&#8706;</mo><mi>t</mi></mrow></mfrac><mo>+</mo><mfrac><mrow><mo>&#8706;</mo><mfenced><mrow><mi>&#961;</mi><mi>k</mi><msub><mi>u</mi><mi>i</mi></msub></mrow></mfenced></mrow><mrow><mo>&#8706;</mo><msub><mi>x</mi><mi>i</mi></msub></mrow></mfrac><mo>=</mo><mfrac><mo>&#8706;</mo><mrow><mo>&#8706;</mo><msub><mi>x</mi><mi>j</mi></msub></mrow></mfrac><mfenced><mrow><msub><mi>&#945;</mi><mi>k</mi></msub><msub><mi>&#956;</mi><mtext>eff</mtext></msub><mfrac><mrow><mo>&#8706;</mo><mi>k</mi></mrow><mrow><mo>&#8706;</mo><msub><mi>x</mi><mi>j</mi></msub></mrow></mfrac></mrow></mfenced><mo>+</mo><msub><mi>G</mi><mi>k</mi></msub><mo>+</mo><mi>&#961;</mi><mi>&#949;</mi><mo>.</mo></math></span><span class="image">https://s3.amazonaws.com/test_tmp/proofs/elsevier/JOEI/72/images/si3.gif</span></span><span version="2"><span class="mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><mfrac><mrow><mo>∂</mo><mfenced><mrow><mi>ρ</mi><mi>k</mi></mrow></mfenced></mrow><mrow><mo>∂</mo><mi>t</mi></mrow></mfrac><mo>+</mo><mfrac><mrow><mo>∂</mo><mfenced><mrow><mi>ρ</mi><mi>k</mi><msub><mi>u</mi><mi>i</mi></msub></mrow></mfenced></mrow><mrow><mo>∂</mo><msub><mi>x</mi><mi>i</mi></msub></mrow></mfrac></math></span><span class="image">https://s3.amazonaws.com/test_tmp/proofs/elsevier/JOEI/72/math/images/6154e062e5ab4cd9b53bca4cad8eb8ef.png</span></span></span></div>
        </div>
        <div class='math-container'></div>
        <div class='dialog-popup-container'></div>
        <script src='scripts/libs/require-2.1.16.js'></script>
        <script src="scripts/polyfills/classList.js"></script>
        <script src="scripts/polyfills/dataset.js"></script>
        <script src="scripts/polyfills.js"></script>
        <script>
            CKEDITOR_BASEPATH = '/scripts/libs/ckeditor-4.5.9/';
            require.config({
                baseUrl: "/",
                urlArgs: "v5",
                // For developement
                // urlArgs: "bust=" +  (new Date()).getTime()
                map: {
                    '*': {
                        'css': '/scripts/libs/css.js',
                        'ckeditor': '/scripts/libs/ckeditor-4.5.9/ckeditor',
                        'he': '/scripts/libs/he-0.5.0',
                        'sax': '/scripts/libs/sax-0.6.1',
                        'rangy': '/scripts/libs/rangy-1.3.0',
                        'jquery': '/scripts/libs/jquery/jquery-1.10.1.min',
                        'jquery-hyphenation': '/scripts/libs/jquery/hyphenation-plugin',
                        'jquery-en-us': '/scripts/libs/jquery/en-us'
                    }
                }
            });
        </script>
         <script>
        window.onload = function () {
            require([
                'scripts/Helper', 'scripts/Request', 'scripts/RequestBuilder',
                'scripts/RequestQueue', 'scripts/EventBus', 'scripts/DialogPopupPanel',
                'scripts/MathEditor', 'scripts/EquationEditor', 'scripts/MathCommand',
                'scripts/Config'
            ],
            function(
                Helper, Request, RequestBuilder, RequestQueue, EventBus, DialogPopupPanel,
                MathEditor, EquationEditor, MathCommand, Config
            ) {
                var mathNodes, equationEditor, requestBuilder, mathEditor,
                    mathCommand;

                // var imageId = document.getElementById('OPT_ID_313_blah');
                // var image = new Image();
                // url = 'https://s3.amazonaws.com/test_tmp/proofs/elsevier/JOEI/72/math/images/5af8295b58f30eaddfaf603dc91effb5.png';
                // image.src = url;
                // image.onload = function() {
                //   // imageId.setAttribute('src', url);
                // }
                // imageId.setAttribute('src', 'images/loading.gif');

                EventBus.subscribe('Math:Equation:OnSave', function(
                    mathFragment, mathReferenceName, newVersionNode
                ) {
                  console.log('Saving math ', newVersionNode);
                });

                EventBus.subscribe('Math:Equation:OnComplete', function(mathReferenceName, mathFragment, imagePath) {
                  console.log('Complete math ', mathReferenceName, mathFragment, imagePath);
                });

                // EventBus.subscribe('Editor:Equation:BackUp', function(mathFragment, mathml) {
                //     console.log(mathFragment, mathml);
                // });
                new MathCommand(
                    EventBus, document, window, '30dbff55f02c15b73ce515ff282dc700', Config.conversionEndPoint, Config.imageSaveEndPoint
                );

                equationEditor = new EquationEditor(com.wiris);
                requestBuilder = new RequestBuilder();
                mathEditor = new MathEditor(
                    document.querySelector('.math-container'), EventBus,
                    equationEditor, document
                );
                mathNodes = document.querySelectorAll('.eqn-container[editable="true"]');
                dialogPopupPanel = new DialogPopupPanel(
                    document.querySelector('.dialog-popup-container'), document, window,
                    EventBus
                );

                // mathCommand = new MathCommand(
                //     EventBus, document, window, '3b39f75475934434cd00FF2700SFftest',
                //     'http://localhost/pgc-api/app/web/index.php/mathToImage'
                // );
                for (i = 0; i < mathNodes.length; i++) {
                    // var mathNodeName = mathNodes[i].getAttribute('name');
                    mathNodes[i].addEventListener('click', function(e) {
                        var mathGeneratedNode = document.querySelector('.math-container');
                        dialogPopupPanel.setTitle('Math Editor');
                        dialogPopupPanel.setContent(document.querySelector('.math-container'));
                        dialogPopupPanel.render();

                        var eqnContainer = e.target.parentNode;
                        var mathNodeName = eqnContainer.getAttribute('name');
                        var currentVersion = eqnContainer.querySelector('span.current_version').innerHTML;
                        var mathmlNode = eqnContainer.querySelector(
                            'span[version="'+currentVersion+'"] .mathml'
                        );

                        var mathFragment = document.createDocumentFragment();
                        mathFragment.appendChild(eqnContainer.cloneNode(true));
                        mathEditor.setMathContext(mathNodeName, mathFragment);
                        mathEditor.setDialogContext(dialogPopupPanel);
                        mathEditor.render(mathmlNode.innerHTML);

                        // var eqnInstance = com.wiris.jsEditor.JsEditor.newInstance();
                        // eqnInstance.insertInto(document.querySelector('.math-container'));
                        // eqnInstance.setMathML(mathmlNode.innerHTML);

                    }, false);
                }


            });
          };

        </script>
    </body>
</html>
