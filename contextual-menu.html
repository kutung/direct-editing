<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Page Central</title>
    <style type="text/css">
      .contextual-menu {
        position: absolute;
        padding: 5px;
        border: 5px solid orange;
        background-color: white;
      }
      .editor{
        margin: auto;
        height: 500px;
        width: 800px;
        overflow-y : scroll;
        position: relative;
      }
     .active > button{
        background-color:#9c9b9b;
      }
     .contextual-menu.hide {
        visibility: hidden;
      }
     .contextual-menu.visible {
        visibility: visible;
      }
      .contextual-menu > .show{
        display: inline-block;
      }
      .contextual-menu > .hide{
        display: none;
      }
    </style>
  </head>
  <body>
    <div id="editor-container">
      <div  id="editor" class="editor">

        <div>
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut consectetur, lectus vel accumsan fermentum, enim eros interdum nibh, viverra rutrum mi tortor in mi. Vivamus vitae massa nec metus laoreet cursus nec in nulla. Integer mi augue, tempor et mollis ac, imperdiet posuere libero. Phasellus sapien justo, congue quis dolor ut, tristique consequat nulla. Quisque porttitor gravida libero, id mollis dui sodales ac. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum erat lorem, aliquet vel felis et, malesuada semper est. Proin pharetra nibh eu risus rhoncus, eget luctus leo malesuada. Aenean porttitor elementum lacus sit amet porta. Vestibulum quis ornare lorem. Aenean in arcu quam. Integer bibendum viverra nisi, sit amet semper augue lacinia eget. Donec ex nisi, varius a semper eget, rhoncus sit amet eros.
        </div>
        <div>
          Nulla in mauris rhoncus, fringilla felis vitae, venenatis mi. Maecenas a facilisis felis. Aenean eget hendrerit diam, vitae faucibus turpis. Vivamus tincidunt id lectus vitae rutrum. Suspendisse ut justo in leo eleifend scelerisque ac eget nisl. Cras vulputate eu turpis nec porttitor. Integer et augue sit amet lacus dictum finibus nec et lacus. Curabitur bibendum purus in purus ornare placerat. Nulla semper massa sapien, sit amet imperdiet augue dapibus ac. Proin sit amet vestibulum augue. Praesent sodales nisl enim, quis vehicula orci vestibulum at.
        </div>
        <div>
          Aenean quis malesuada lorem. Aliquam odio enim, bibendum nec lacinia sed, imperdiet id eros. Nunc auctor accumsan erat ut gravida. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Mauris sit amet elementum mi. Nunc rutrum placerat ex, ornare hendrerit lorem elementum a. Mauris ullamcorper sollicitudin vehicula. Donec eu arcu non velit gravida iaculis a vitae odio. Proin justo lorem, tempus eget posuere at, interdum a turpis. Morbi at egestas purus. Sed sed ipsum sed tellus venenatis ornare eget vitae urna. Nullam euismod dignissim feugiat. Nam diam massa, dapibus sed consequat nec, dictum volutpat tellus. Donec facilisis ornare facilisis. Curabitur ultricies lectus at lacinia accumsan.
        </div>
        <div>
          Fusce ac nunc id nunc dapibus egestas. Sed mattis eu turpis dapibus varius. Sed eu tempor lectus. Vestibulum tempor urna vel sagittis facilisis. Cras luctus erat sit amet ornare porta. Fusce dignissim metus ac odio pellentesque, in lobortis mi aliquam. Donec eget rutrum mauris, sit amet porttitor metus. Interdum et malesuada fames ac ante ipsum primis in faucibus. Fusce feugiat feugiat ligula, a gravida nulla dignissim ac. Pellentesque at sollicitudin nulla. Vivamus id lacus mi. Mauris dolor dolor, aliquet vitae dui et, pulvinar luctus ex.
        </div>
        <div>
          Suspendisse felis nisl, facilisis eu purus commodo, congue ullamcorper justo. Sed mi quam, finibus non gravida vitae, laoreet ut augue. Sed iaculis non est sed accumsan. Vivamus dictum odio id ante volutpat, quis convallis lacus euismod. Donec libero dui, porta id lobortis nec, aliquet id massa. Pellentesque hendrerit porttitor condimentum. Donec quis cursus nunc, non tincidunt nibh.
        </div>
        <div>
          Etiam eget mi sapien. Nullam auctor felis diam, in fermentum sapien malesuada at. Duis massa tortor, iaculis eu elit ac, bibendum efficitur magna. Aenean consectetur turpis sit amet felis porta pellentesque. Maecenas eros elit, sodales non mi vel, tempus porta purus. In tempus blandit laoreet. Phasellus ultrices, ipsum in pulvinar hendrerit, lorem ligula tristique lorem, a auctor sem urna sed ipsum. Nulla odio odio, porta in arcu eu, semper porttitor ante. Morbi posuere arcu felis, non mattis diam rhoncus iaculis. Quisque sed libero nec justo pulvinar faucibus. Proin sem velit, euismod sed risus ut, eleifend ullamcorper nisi. Phasellus maximus eros vel orci pharetra, molestie porta nibh ultrices. Etiam posuere ligula at dui ullamcorper, ac imperdiet dui laoreet. Donec lacinia, lorem quis ornare placerat, urna mi ultrices erat, a vulputate metus purus ut justo. Vestibulum dictum quam nec faucibus ornare. Mauris orci libero, feugiat non urna non, mattis dignissim diam.
        </div>
        <div>
          Proin et urna a turpis vestibulum pulvinar quis in velit. Morbi sagittis tempus rutrum. Maecenas eu venenatis ligula, eget sodales sem. Morbi rutrum metus a dapibus placerat. Curabitur rutrum, purus sodales porttitor lobortis, est mi interdum neque, non blandit lacus leo id nulla. Quisque eget metus vulputate libero scelerisque bibendum. In commodo, diam non molestie ornare, sapien velit fringilla nisi, id imperdiet mi ex eget ex. Quisque non aliquam sapien. Aenean nec nisi eu libero consequat maximus. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Aliquam augue libero, aliquam ac augue ut, lacinia aliquam tortor. In scelerisque, velit in condimentum consectetur, sem dui convallis mi, vitae suscipit elit urna vitae libero.
        </div>
        <div>
          Praesent sit amet lectus tempor, varius arcu sed, blandit lacus. Etiam id tincidunt urna, in posuere dolor. Duis condimentum vestibulum faucibus. Proin accumsan varius gravida. Mauris at mauris nec neque semper scelerisque. Sed elementum nulla quis sem sollicitudin ultrices. Suspendisse turpis augue, blandit ut felis in, tempor placerat ante. Sed luctus sapien sit amet lacus tincidunt scelerisque. Etiam dignissim leo vel nibh rhoncus, vel commodo magna aliquam. Curabitur molestie leo sit amet ligula egestas tristique. In et velit tincidunt, pellentesque ipsum nec, efficitur arcu. Aliquam pulvinar eget nulla vitae hendrerit.
        </div>
        <div>
          Quisque vitae porttitor enim. Nunc pulvinar dictum elit a venenatis. Donec quis sagittis sem, id molestie nibh. Fusce commodo non orci a semper. Suspendisse id enim in erat laoreet commodo. Nullam a nisi sed arcu efficitur ultrices in vel tortor. Vivamus posuere interdum facilisis. Integer facilisis mattis ipsum, in laoreet enim dapibus eleifend. Duis vestibulum arcu vitae risus placerat molestie. Cras sed tempus felis. Praesent quis mollis nisi. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.
        </div>
        <div>
          Curabitur tempus nisl non finibus efficitur. Vivamus dignissim, nisi vitae laoreet dictum, turpis velit sagittis augue, a faucibus sem nisi sit amet leo. Maecenas condimentum a magna eu fermentum. Vestibulum sed tellus lacus. Mauris quis varius lacus, vitae rhoncus elit. Mauris eget lacus sed est lobortis consectetur eget sed tellus. Cras pretium lobortis feugiat. Donec mattis velit sed euismod porta. Suspendisse vel lacinia sem, non sodales lacus. Donec rhoncus erat a libero dignissim hendrerit mollis ornare massa. Maecenas vel lorem hendrerit, ullamcorper justo sed, tempor urna. Pellentesque ac nibh porta, eleifend ligula id, posuere erat. Aenean facilisis, turpis vel pulvinar lacinia, risus lorem viverra magna, ac venenatis justo lectus a ex. Vivamus luctus fringilla diam et varius.
        </div>
        <div>
          Vivamus congue tincidunt posuere. Maecenas pharetra pellentesque mauris sed facilisis. Vestibulum fringilla orci eu magna porttitor, at gravida justo placerat. Nulla facilisi. Curabitur laoreet egestas sem sed imperdiet. Proin metus turpis, venenatis non tortor at, varius luctus odio. Suspendisse ultricies convallis turpis non fringilla. Praesent neque risus, tempus at turpis vel, elementum vehicula lorem. Vivamus molestie diam et vulputate commodo. Fusce pretium, enim at commodo vulputate, est felis tempor tortor, ut tempor diam nisl quis nulla. Nulla iaculis sollicitudin quam vel consequat. Curabitur convallis, magna at euismod blandit, massa diam mollis tellus, et elementum orci elit vel enim. Vivamus aliquet sem nec malesuada rhoncus.
        </div>
        <div>
          Integer eleifend nibh at metus facilisis gravida quis ac arcu. Nunc quis accumsan massa, ut commodo purus. Cras pulvinar lobortis quam non interdum. Duis hendrerit tellus ac nibh consectetur, at faucibus sapien aliquet. Cras at lectus tortor. Aliquam maximus mauris mollis leo gravida ultrices. Quisque laoreet magna a neque ultrices iaculis.
        </div>
        <div>
          Nunc fermentum condimentum ullamcorper. Pellentesque elementum ut tortor a placerat. Suspendisse pharetra tristique dolor, ut gravida augue placerat ut. Sed mi est, aliquet vitae mattis a, molestie non magna. Proin iaculis nunc sit amet orci dapibus, eu tincidunt mi molestie. Curabitur sagittis sollicitudin velit eget sagittis. Quisque non arcu gravida, faucibus leo non, posuere augue. Nam mattis porta elit, vitae consequat odio pulvinar eu.
        </div>
        <div>
          Nam eget eleifend ex. Etiam cursus tempus enim vitae imperdiet. Ut felis sem, pretium sit amet varius sit amet, facilisis et sapien. Vestibulum tempor massa at risus tincidunt, vitae ultricies urna pulvinar. Sed mauris nisi, pharetra luctus diam nec, mattis semper purus. Cras massa leo, suscipit eget venenatis at, porttitor ac mauris. Sed id mollis turpis. Morbi interdum a diam et cursus. Donec et pellentesque metus. Aliquam pretium magna eu erat molestie, at posuere libero pretium. Pellentesque arcu turpis, auctor a egestas sit amet, varius id lectus. In mollis dui odio, vel tempor lectus lobortis at. Donec condimentum velit placerat, laoreet ipsum in, porta mauris. Etiam tristique urna urna, eleifend gravida metus accumsan eu. Mauris tempor dapibus felis, non scelerisque justo.
        </div>
        <div>
          Suspendisse vitae malesuada metus. Mauris ultrices, lacus nec rutrum interdum, mi orci finibus risus, ac pharetra ipsum nisi eget est. Sed non semper ligula, eu pellentesque metus. Mauris et consectetur eros. Vivamus volutpat, nisl in bibendum malesuada, orci metus hendrerit ante, vitae pretium dolor tortor vel urna. Aliquam convallis elementum ex nec convallis. Aenean et elit laoreet, fringilla orci dignissim, volutpat tortor. Donec non tortor ac odio vulputate bibendum porttitor at mauris. Curabitur ut mi a nisi bibendum pharetra. Proin iaculis, nisl quis placerat consectetur, dolor arcu pulvinar erat, ut viverra urna nisl feugiat est. Sed sed tincidunt nunc, at feugiat nulla. Nam commodo magna sed justo vestibulum ornare. Sed dignissim, lectus ut maximus rhoncus, libero felis venenatis magna, eu cursus dolor risus a nibh. Aenean pharetra lorem pellentesque finibus egestas.
        </div>
        <div>
          Aenean ut leo in felis consequat gravida vel nec sapien. Phasellus convallis mi sed interdum consectetur. Vivamus fermentum tristique arcu quis ultricies. Etiam ut rutrum nunc. Integer venenatis dui nec lobortis luctus. Donec fringilla nibh a nisi consequat tincidunt. Vivamus facilisis gravida ipsum. Quisque tincidunt cursus ornare. Duis nec mi et ex condimentum cursus. Etiam gravida imperdiet sem eu accumsan. Proin molestie, neque dictum fermentum tempor, leo leo hendrerit nibh, ac posuere libero ligula id sem. Morbi finibus eleifend condimentum. Nulla ut orci sed turpis laoreet elementum. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Sed nunc odio, pretium ac facilisis quis, dictum eu mauris.
        </div>
        <div>
          Donec rhoncus mi eu dictum finibus. Ut sed imperdiet ex. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Phasellus et odio risus. In molestie varius lectus, in ullamcorper magna dignissim ac. Phasellus non diam sit amet nunc accumsan euismod vitae sit amet risus. Sed in laoreet sapien. In congue arcu non felis feugiat, fringilla commodo leo gravida. Donec in tortor ut sapien elementum vestibulum. Integer faucibus velit et orci dictum posuere. Cras lorem urna, tempor quis luctus nec, placerat vel dolor.
        </div>
        <div>
          Nulla facilisi. Proin augue augue, mollis vitae tristique id, sodales id felis. Nullam arcu quam, tincidunt in lorem nec, imperdiet ornare lacus. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Etiam porta enim eget facilisis faucibus. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Maecenas nisi turpis, rhoncus a nisl at, vestibulum euismod nunc. Maecenas ut lacinia diam. Phasellus in sem sit amet felis mattis porta. Nullam consectetur at augue aliquet porta. Quisque vestibulum lacinia ligula in volutpat.
        </div>
        <div>
          Vivamus purus odio, ultrices pulvinar lacinia et, mollis scelerisque arcu. Etiam accumsan dignissim commodo. Donec in enim varius, elementum est eget, semper ante. Nulla facilisi. Nulla eu neque felis. Praesent pellentesque dictum tellus sit amet imperdiet. Etiam in scelerisque ligula.
        </div>
        <div>
          Vivamus congue sollicitudin neque a mattis. Suspendisse venenatis pulvinar elit, et vestibulum lacus pretium ac. Mauris gravida rutrum est non molestie. Vivamus velit lectus, vestibulum ut varius sit amet, condimentum eget ligula. Morbi quis sem porttitor, mollis lorem at, molestie urna. Donec ac lorem turpis. In hac habitasse platea dictumst. Fusce ac nulla tortor. Praesent quam justo, volutpat ac condimentum sollicitudin, elementum at nisi. Aenean odio odio, pharetra eget leo in, efficitur ornare ex.
        </div>
      </div>
    </div>
    <script src="scripts/libs/require-2.1.16.js"></script>
    <script>
      require.config({
          baseUrl: ""
      });
    </script>

    <script>
      require([
          'scripts/Helper', 'scripts/EventBus', 'scripts/ContextualMenu'
      ],
          function (Helper, EventBus, ContextualMenu) {
              var eventBus, contextualMenu, container;
              container = document.getElementById('editor');
              contextualMenu = new ContextualMenu(container, window, document, EventBus);
              var menuItem1 = {
                  'render': function () {
                      var container;
                      container = document.createElement('button');
                      container.innerHTML = 'B';
                      container.addEventListener('click', function (e) {
                        alert('am bold');
                      });
                      return container;
                  },
                  'destroy' : function () {
                    return null;
                  }
              },
              menuItem2 = {
                  'render': function () {
                      var container;
                      container = document.createElement('button');
                      container.innerHTML = 'I';
                      container.addEventListener('click', function (e) {
                        alert('am Italic');
                      });
                      return container;
                  },
                  'destroy' : function () {
                    return null;
                  }
              };
              menuItem3 = {
                  'render': function () {
                      var container;
                      container = document.createElement('button');
                      container.innerHTML = 'SS';
                      container.addEventListener('click', function (e) {
                        alert('am SuperScript');
                      });
                      return container;
                  },
                  'destroy' : function () {
                    return null;
                  }
              };
              menuItem4 = {
                  'render': function () {
                      var container;
                      container = document.createElement('button');
                      container.innerHTML = 'SuS';
                      container.addEventListener('click', function (e) {
                        alert('am SubScript');
                      });
                      return container;
                  },
                  'destroy' : function () {
                    return null;
                  }
              };

              contextualMenu.add('bold', menuItem1);
              contextualMenu.add('italic', menuItem2);
              contextualMenu.add('superScript', menuItem3);
              contextualMenu.add('subScript', menuItem4);
              contextualMenu.render();

              //contextualMenu.remove('italic');

              container.addEventListener('mouseup', function (e) {
                var contexts = ['onBold', 'onItalic', 'onSuperscript', 'onSubscript'];
                var context = contexts[Math.floor(Math.random()*contexts.length)];
                  var editorMetrics = {
                      'height': this.clientHeight,
                      'width': this.clientWidth,
                      'top': this.offsetTop,
                      'left': this.offsetLeft,
                      'scrollTop': this.scrollTop
                  };
                  var position = {
                      'left': e.pageX,
                      'top': e.pageY
                  };
                  EventBus.publish('contextMenu:show', position, editorMetrics, container, [context]);
              });

          });
    </script>
  </body>
</html>
